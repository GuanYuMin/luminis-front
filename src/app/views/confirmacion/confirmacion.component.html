<style>
@charset "US-ASCII";
@import "http://fonts.googleapis.com/css?family=Lato:300,400,700";
* {
    color: #444;
    font-family: Lato;
    font-size: 16px;
    font-weight: 300;
}
::-webkit-input-placeholder {
   font-style: italic;
}
:-moz-placeholder {
   font-style: italic;
}
::-moz-placeholder {
   font-style: italic;
}
:-ms-input-placeholder {
   font-style: italic;
}

body {
    float: left;
    margin: 0;
    padding: 0;
    width: 100%;
}
strong {
	font-weight: 700;
}
a {
    cursor: pointer;
    display: block;
    text-decoration: none;
}
a.button {
    border-radius: 5px 5px 5px 5px;
    -webkit-border-radius: 5px 5px 5px 5px;
    -moz-border-radius: 5px 5px 5px 5px;
    text-align: center;
    font-size: 21px;
    font-weight: 400;
    padding: 12px 0;
    width: 100%;
    display: table;
    background: #E51F04;
    background: -moz-linear-gradient(top,  #E51F04 0%, #A60000 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#E51F04), color-stop(100%,#A60000));
    background: -webkit-linear-gradient(top,  #E51F04 0%,#A60000 100%);
    background: -o-linear-gradient(top,  #E51F04 0%,#A60000 100%);
    background: -ms-linear-gradient(top,  #E51F04 0%,#A60000 100%);
    background: linear-gradient(top,  #E51F04 0%,#A60000 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#E51F04', endColorstr='#A60000',GradientType=0 );
}
a.button i {
    margin-right: 10px;
}
a.button.disabled {
    background: none repeat scroll 0 0 #ccc;
    cursor: default;
}
.bkng-tb-cntnt {
    float: left;
    width: 800px;
}
.bkng-tb-cntnt a.button {
    color: #fff;
    float: right;
    font-size: 18px;
    padding: 5px 20px;
    width: auto;
}
.bkng-tb-cntnt a.button.o {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
    color: #e51f04;
    border: 1px solid #e51f04;
}
.bkng-tb-cntnt a.button i {
    color: #fff;
}
.bkng-tb-cntnt a.button.o i {
    color: #e51f04;
}
.bkng-tb-cntnt a.button.right i {
    float: right;
    margin: 2px 0 0 10px;
}
.bkng-tb-cntnt a.button.left {
    float: left;
}
.bkng-tb-cntnt a.button.disabled.o {
    border-color: #ccc;
    color: #ccc;
}
.bkng-tb-cntnt a.button.disabled.o i {
    color: #ccc;
}
.pymnts {
    float: left;
    width: 800px;
}
.pymnts * {
    float: left;
}

.sctn-row {
    margin-bottom: 35px;
    width: 800px;
}
.sctn-col {
    width: 375px;
}
.sctn-col.l {
    width: 425px;
}
.sctn-col input {
    border: 1px solid #ccc;
    font-size: 18px;
    line-height: 24px;
    padding: 10px 12px;
    width: 333px;
}
.sctn-col label {
    font-size: 24px;
    line-height: 24px;
    margin-bottom: 10px;
    width: 100%;
}
.sctn-col.x3 {
    width: 300px;
}
.sctn-col.x3.last {
    width: 200px;
}
.sctn-col.x3 input {
    width: 210px;
}
.sctn-col.x3 a {
    float: right;
}
.pymnts-sctn {
    width: 800px;
}
.pymnt-itm {
    /*margin: 0 0 3px;*/
    margin: 0;
    width: 800px;
}
.pymnt-itm h2 {
    background-color: #e9e9e9;
    font-size: 24px;
    line-height: 24px;
    margin: 0;
    padding: 28px 0 28px 20px;
    /*width: 780px;*/
}
.pymnt-itm.active h2 {
    cursor: default;
}
.pymnt-itm div.pymnt-cntnt {
    display: none;
}
.pymnt-itm.active div.pymnt-cntnt {
    background-color: #f7f7f7;
    display: block;
    padding: 0 0 30px;
    width: 100%;
}

.pymnt-cntnt div.sctn-row {
    margin: 20px 30px 0;
    width: 740px;
}
.pymnt-cntnt div.sctn-row div.sctn-col {
    width: 345px;
}
.pymnt-cntnt div.sctn-row div.sctn-col.l {
    width: 395px;
}
.pymnt-cntnt div.sctn-row div.sctn-col input {
    width: 303px;
}
.pymnt-cntnt div.sctn-row div.sctn-col.half {
    width: 155px;
}
.pymnt-cntnt div.sctn-row div.sctn-col.half.l {
    float: left;
    width: 190px;
}
.pymnt-cntnt div.sctn-row div.sctn-col.half input {
    width: 113px;
}
.pymnt-cntnt div.sctn-row div.sctn-col.cvv {
    background-image: url("./assets/img/cvv.png");
    background-position: 156px center;
    background-repeat: no-repeat;
    padding-bottom: 30px;
}
.pymnt-cntnt div.sctn-row div.sctn-col.cvv div.sctn-col.half input {
    width: 110px;
}
.openpay {
    float: right !important;
    height: 60px;
    margin: 10px 30px 0 0;
    /*width: 435px;*/
}
.openpay div.logo {
    background-image: url("./assets/img/openpay.png");
    background-position: left bottom;
    background-repeat: no-repeat;
    border-right: 1px solid #ccc;
    font-size: 12px;
    font-weight: 400;
    height: 70px;
    padding: 15px 20px 0 0;
}
.openpay div.shield {
    background-image: url("./assets/img/security.png");
    background-position: left bottom;
    background-repeat: no-repeat;
    font-size: 12px;
    font-weight: 400;
    margin-left: 20px;
    padding: 20px 0 0 40px;
    width: 400px;
}
.card-expl {
    float: left;
    height: 80px;
    margin: 20px 0;
    width: 800px;
}
.card-expl div {
    background-position: left 45px;
    background-repeat: no-repeat;
    height: 70px;
    padding-top: 10px;
}
.card-expl div.debit {
    background-image: url("./assets/img/cards2.png");
    margin-left: 20px;
    width: 540px;
}
.card-expl div.credit {
    background-image: url("./assets/img/cards1.png");
    border-right: 1px solid #ccc;
    margin-left: 30px;
    width: 209px;
}
.card-expl h4 {
    font-weight: 400;
    margin: 0;
}
.toRight {
  float: right !important;
  margin-right: 20px !important;
}
.red {
  color: #FF0000;
}
</style>
<div class="checkout-block" *ngIf="!confirmar">
  <div class="container">
    <div class="col-12">
      <div class="checkout__note">
        <div>
          <i-feather name="bell"></i-feather>
        </div>
        <div>
          <h5 class="mb-3">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptatem quam ratione aliquam id, a saepe?
          </h5>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa, hic.</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md-7 col-lg-8">
        <h2 class="mb-4">Detalle de compra</h2>
        <div class="checkout-block__items-detail">
          <div class="checkout-block__items">
            <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                <div class="checkout-block__product-card">
                    <img src="{{datos.membership_url}}" alt="">
                    <p>{{datos.name}}</p>
                </div>
            </div>
            <!--<div class="col-12 col-sm-6 col-md-6 col-lg-4">
                <div class="checkout-block__product-card">
                    <img src="assets/img/bg.webp" alt="">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores, harum!</p>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                <div class="checkout-block__product-card">
                    <img src="assets/img/bg.webp" alt="">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores, harum!</p>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                <div class="checkout-block__product-card">
                    <img src="assets/img/bg.webp" alt="">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores, harum!</p>
                </div>
            </div>-->
          </div>
        </div>
      </div>

      <div class="col-12 col-md-5 col-lg-4">
        <h2 class="mb-4">Resumen de compra</h2>
        <div class="checkout-block__purchase-details">
          <div class="checkout-block__subtotal">
            <h6>Subtotal:</h6>
            <h5>${{datos.cost}}</h5>
          </div>
          <div class="checkout-block__discounts">
            <h6>Descuento:</h6>
            <h5>-${{descuento}}</h5>
          </div>
          <div class="checkout-block__total">
            <h3>Total:</h3>
            <h4>${{datos.cost}}</h4>
          </div>
        </div>
        <button *ngIf="!loading" class="btn l-btn-primary" (click)="openPaymentModal(paymentcontent)">Confirmar compra <i-feather
            name="chevron-right"></i-feather></button><!-- (click)="confirmar = !confirmar"-->
      </div>

    </div>
    <div class="row">

    </div>
  </div>
</div>

<div class="confirmation-block" *ngIf="confirmar">
  <div class="container">
    <div class="col-12">
      <div class="checkout__note">
        <div>
          <i-feather name="bell"></i-feather>
        </div>
        <div>
          <h5 class="mb-3">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptatem quam ratione aliquam id, a saepe?
          </h5>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa, hic.</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md-8 col-lg-8">
        <div class="confirmation-block__items-detail">
          <div class="confirmation-block__header">
            <h1 class="">Gracias por tu compra!</h1>
            <div>
              <i-feather name="check-circle"></i-feather>
            </div>
          </div>
          <div class="confirmation-block__items">
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore enim veritatis molestias! Consequatur
              blanditiis, ratione excepturi ipsum, aperiam minima soluta sunt fuga fugit incidunt amet iusto culpa!
              Odio, ea ducimus.</p>
            <table class="mt-3 table table-responsive">
              <tbody>
                <tr>
                  <td class="bold" scope="col">Folio de compra:</td>
                  <td scope="col">{{folio}}</td>
                </tr>
                <tr>
                  <td class="bold" scope="col">Fecha:</td>
                  <td scope="col">{{operation_date | date:'dd/MM/yyyy'}}</td>
                </tr>
                <tr>
                  <td class="bold" scope="col">Importe por:</td>
                  <td scope="col">${{amount}}</td>
                </tr>
                <tr>
                  <td class="bold" scope="col">Método de pago:</td>
                  <td scope="col">{{type}}</td>
                </tr>
              </tbody>
            </table>
            <div class="confirmation-block__purchase-info">
              <small>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore enim veritatis molestias!</small>
              <small>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore enim veritatis molestias!
                Consequatur
                blanditiis, ratione excepturi ipsum, aperiam minima soluta sunt fuga fugit incidunt amet iusto culpa!
                Odio, ea ducimus.</small>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-4 col-lg-4">
        <div class="confirmation-block__links">
          <h4 class="mb-4">Información importante</h4>
          <ul>
            <li>
              <a href="#">
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptas, nesciunt!
              </a>
            </li>
            <li>
              <a href="#">
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptas, nesciunt!
              </a>
            </li>
            <li>
              <a href="#">
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptas, nesciunt!
              </a>
            </li>
            <li>
              <a href="#">
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptas, nesciunt!
              </a>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>

</div>

<ng-template #paymentcontent let-modal>
  <div class="modal-body p-0">
    <div class="bkng-tb-cntnt">
      <div class="pymnts">
        <form [formGroup]="paymentForm" autocomplete="off" novalidate id="paymentForm">
          <input type="hidden" name="token_id" id="token_id">
          <div class="pymnt-itm card active">
            <h2>Tarjeta de crédito o débito<button type="button" class="btn-close toRight" aria-label="Close" (click)="modal.dismiss('Cross click')" *ngIf="!loading"></button></h2>
            <div class="pymnt-cntnt">
              <div class="card-expl">
                <div class="credit"><h4>Tarjetas de crédito</h4></div>
                <div class="debit"><h4>Tarjetas de débito</h4></div>
              </div>
              <div class="sctn-row">
                <div class="sctn-col l">
                  <label>Nombre del titular</label>
                  <input type="text" formControlName="name" id="name" placeholder="Como aparece en la tarjeta" autocomplete="off" data-openpay-card="holder_name" #name maxlength="255">
                  <div *ngIf="paymentForm.controls['name'].invalid && (paymentForm.controls['name'].dirty || paymentForm.controls['name'].touched)" class="alert-danger">
                    <div *ngIf="paymentForm.controls['name'].errors?.['required']" class="red">
                      Nombre del titular requerido.
                    </div>
                    <div *ngIf="paymentForm.controls['name'].invalid && name.value.length > 0" class="red">
                      Nombre del titular inválido.
                    </div>
                  </div>
                </div>
                <div class="sctn-col">
                  <label>Número de tarjeta</label>
                  <input type="text" formControlName="card_number" id="card_number" autocomplete="off" data-openpay-card="card_number" #card_number (keypress)="numberOnly($event)" maxlength="16">
                  <div *ngIf="paymentForm.controls['card_number'].invalid && (paymentForm.controls['card_number'].dirty || paymentForm.controls['card_number'].touched)" class="alert-danger">
                    <div *ngIf="paymentForm.controls['card_number'].errors?.['required']" class="red">
                      Número de tarjeta requerido.
                    </div>
                    <div *ngIf="paymentForm.controls['card_number'].invalid && card_number.value.length > 0" class="red">
                      Número de tarjeta inválido.
                    </div>
                  </div>
                </div>
              </div>
              <div class="sctn-row">
                <div class="sctn-col l">
                  <label>Fecha de expiración</label>
                  <div class="sctn-col half l">
                    <input type="text" formControlName="month" id="month" placeholder="Mes" data-openpay-card="expiration_month" #month (keypress)="numberOnly($event)" maxlength="2">
                    <div *ngIf="paymentForm.controls['month'].invalid && (paymentForm.controls['month'].dirty || paymentForm.controls['month'].touched)" class="alert-danger">
                      <div *ngIf="paymentForm.controls['month'].errors?.['required']" class="red">
                        Mes requerido.
                      </div>
                      <div *ngIf="paymentForm.controls['month'].invalid && month.value.length > 0" class="red">
                        Mes inválido.
                      </div>
                    </div>
                  </div>
                  <div class="sctn-col half l">
                    <input type="text" formControlName="year" id="year" placeholder="Año" data-openpay-card="expiration_year" #year (keypress)="numberOnly($event)" maxlength="2">
                    <div *ngIf="paymentForm.controls['year'].invalid && (paymentForm.controls['year'].dirty || paymentForm.controls['year'].touched)" class="alert-danger">
                      <div *ngIf="paymentForm.controls['year'].errors?.['required']" class="red">
                        Año requerido.
                      </div>
                      <div *ngIf="paymentForm.controls['year'].invalid && year.value.length > 0" class="red">
                        Año inválido.
                      </div>
                    </div>
                  </div>
                </div>
                <div class="sctn-col cvv"><label>Código de seguridad</label>
                  <div class="sctn-col half l">
                    <input type="text" formControlName="cvv" id="cvv" placeholder="3 dígitos" autocomplete="off" data-openpay-card="cvv2" #cvv (keypress)="numberOnly($event)" maxlength="3">
                    <div *ngIf="paymentForm.controls['cvv'].invalid && (paymentForm.controls['cvv'].dirty || paymentForm.controls['cvv'].touched)" class="alert-danger">
                      <div *ngIf="paymentForm.controls['cvv'].errors?.['required']" class="red">
                        CVV requerido.
                      </div>
                      <div *ngIf="paymentForm.controls['cvv'].invalid && cvv.value.length > 0" class="red">
                        CVV inválido.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="openpay"><div class="logo">Transacciones realizadas vía:</div>
                <div class="shield">Tus pagos se realizan de forma segura con encriptación de 256 bits</div>
              </div>
              <div class="sctn-row" *ngIf="!paymentForm.pristine && !paymentForm.invalid && !loading">
                <a class="button rght" id="pay-button" (click)="processPayment(name.value, card_number.value, month.value, year.value, cvv.value)">Pagar</a><!--[disabled]="paymentForm.pristine || paymentForm.invalid"-->
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="my-container">
      <ng-template #customLoadingTemplate>
        <div class="custom-class">
          <h4>Por favor espere...</h4>
        </div>
      </ng-template>

      <ngx-loading
        [show]="loading"
        [config]="{ backdropBorderRadius: '3px' }"
        [template]="customLoadingTemplate"
      ></ngx-loading>
    </div>
  </div>
</ng-template>
